/*
 * FlightControl.h
 *
 *  Created on: Mar 28, 2012
 *      Author: imaveek
 */

#ifndef FLIGHTCONTROL_H_
#define FLIGHTCONTROL_H_

#include <stdint.h>
#include "PID.h"


#define MOTOR1_PIN 11
#define MOTOR2_PIN 10
#define MOTOR3_PIN 8
#define MOTOR3_DIR_PIN 13

class FlightControl {
public:
	// Properties
	float gyroSetPoint;
	float altSetPoint;
	uint16_t throttle;

	uint16_t topRotDuty;
	uint16_t botRotDuty;

	int16_t gz;
	int16_t mx,my,mz;
	uint16_t alt;

	float yawInput;

	PID* yawPID;
	PID* altPID;

	bool yawPIDenabled;
	bool altPIDenabled;
	bool turnEnabled;

	// Methods
	void initialize();
	void mainLoop();
	void enableYawPID(bool status);
	void enableAltPID(bool status);
	void setTopRotorDuty(uint16_t duty);
	void setBottomRotorDuty(uint16_t duty);
	void turn(int16_t angle);
	void enableTurnMode(int16_t angle);
	void goForward(bool status);
};

extern FlightControl FlightControl1;
#endif /* FLIGHTCONTROL_H_ */
