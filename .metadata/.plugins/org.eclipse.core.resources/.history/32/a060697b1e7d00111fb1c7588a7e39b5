/*
 * FlightControl.h
 *
 *  Created on: Mar 28, 2012
 *      Author: imaveek
 */

#ifndef FLIGHTCONTROL_H_
#define FLIGHTCONTROL_H_

#include <stdint.h>

#define MOTOR1_PIN 11
#define MOTOR2_PIN 10
#define MOTOR3_PIN 8
#define MOTOR3_DIR_PIN 13

class FlightControl {
public:
	// Properties
	float epsilon;
	float dt;        //100ms loop time
	float yawMAX;    //For Current Saturation
	float yawMIN;
	float yawKp;
	float yawKd;
	float yawKi;
	float gyroSetPoint;
	float pre_error;
	float integral;
	float error;
	float derivative;
	float output;
	float yawInput;
	uint16_t topRotDuty;
	uint16_t botRotDuty;
	int16_t gz;


	uint16_t throttle;

	bool yawPIDenabled;

	// Methods
	void initialize();
	float yawPID(float setpoint, float actual_position);
	void mainLoop();
	void enableYawPID(bool status);
	void setTopRotorDuty(uint16_t duty);
	void setBottomRotorDuty(uint16_t duty);
};

extern FlightControl FlightControl1;
#endif /* FLIGHTCONTROL_H_ */
